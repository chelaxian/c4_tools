# Назначение инструмента

Генерация через API Континент 4 заданного количества правил по схеме:

```
Правило фильтрации
    Порядковый номер:                Автоматически по порядку
    Название:                        FW_Rule_{Num}                   // {Num} = 1..32767
    Отправитель:                     Host_{Set}_{Num}_1              // {Set} = 1..250, {Num} = 1..65534
    Получатель:                      Host_{Set}_{Num}_2              // {Set} = 1..250, {Num} = 1..65534
    Сервис:                          Service_{Proto}                 // {Proto} = TCP/UDP/ICMP
    Протокол/Приложение:             Любой
    Действие:                        {Action}                        // {Action} = Пропустить / Блокировать
    Профиль:                         Нет
    СОВ:                             Выкл
    Интервал:                        Всегда
    Лог:                             {Log}                           // {Log} = Лог / Нет
    Установить:                      Везде
    Описание:                        Пусто

Правило трансляции
    Порядковый номер:                Автоматически по порядку
    Название:                        NAT_Rule_{Num}                  // {Num} = 1..32767 (для каждого типа трансляции)
    Оригинальный отправитель:        Host_{Set}_{Num}_1              // {Set} = 1..250, {Num} = 1..65534
    Оригинальный получатель:         Host_{Set}_{Num}_2              // {Set} = 1..250, {Num} = 1..65534
    Оригинальный сервис:             Service_{Proto}                 // {Proto} = TCP/UDP
    Трансляция:                      {Action}                        // {Action} = Не транслировать / Скрыть / Отправителя / Получателя / Отобразить
    Транслированный отправитель:     Trans_Host
    Транслированный получатель:      Trans_Host
    Транслированный сервис:          Trans_Service_{Proto}_{Port}    // {Proto} = TCP/UDP, {Port} = SrcPort / DstPort
    Интерфейс                        Автоматически
    Установить                       Везде
    Описание                         Пусто

Хост (оригинальный)
    Название:                        Host_{Set}_{Num}_N              // N = 1 / 2
    Адрес:                           AAA.BBB.CCC.DDD                 // 10.10.0.0/16, кроме 255
    Описание:                        Пусто

Хост (транслированный)
    Название:                        Trans_Host
    Адрес:                           172.16.10.10
    Описание:                        Пусто

Сервис (оригинальный)
    Название:                        Service_{Proto}
    Протокол:                        TCP / UDP / ICMP                // ICMP - только для правил фильтрации
    Порт отправителя:                Любой
    Порт получателя:                 Любой
    Тип сообщения:                   Любой
    Код сообщения:                   Любой
    Описание:                        Пусто

Сервис (транслированный)
    Название:                        Trans_Service_{Proto}_{Port}
    Протокол:                        TCP / UDP                       // Соответствует протоколу оригинального сервиса
    Порт отправителя:                Любой / 12345                   // 12345 - только для трансляции отправителя
    Порт получателя:                 Любой / 12345                   // 1234 - только для трансляции получателя
    Описание:                        Пусто
```

Инструмент можно использовать для наполнения БД конфигурации ЦУС шаблонными правилами и объектами и последующего нагрузочного тестирования ЦУС в части установки политики.

Для корректной работы инструмента необходимо обеспечить отсутствие дубликатов правил и объектов после предыдущего цикла работы инструмента.

# Основные функции инструмента

1. Использование библиотеки `c4_lib` для работы с API Континент 4.
2. Генерация N правил фильтрации с M уникальными парами сетевых объектов типа "Хост".
3. Вывод на экран справки по использованию инструмента.

# Приложения

В качестве входных данных инструмент использует файл `settings.json` со следующими директивами для инструмента:

- `fwrule_create` = [`true` / `false`] - признак того, что инструмент должен создать правила фильтрации;
- `fwrule_logging` = [`true` / `false`] - признак того, что в правилах фильтрации должно быть включено логирование;
- `fwrule_create` = [`true` / `false`] - признак того, что правила фильтрации должны быть блокирующими;
- `original_create` = [`true` / `false`] - признак того, что инструмент должен создать правила трансляции с типом "Не транслировать";
- `masquerade_create` = [`true` / `false`] - признак того, что инструмент должен создать правила трансляции с типом "Скрыть";
- `dynamic_create` = [`true` / `false`] - признак того, что инструмент должен создать правила трансляции с типом "Отправителя";
- `dnat_create` = [`true` / `false`] - признак того, что инструмент должен создать правила трансляции с типом "Получателя";
- `static_create` = [`true` / `false`] - признак того, что инструмент должен создать правила трансляции с типом "Отобразить";
- `tcp_service_include` = [`true` / `false`] - признак того, что при создании правил должны использоваться сервисы TCP;
- `udp_service_include` = [`true` / `false`] - признак того, что при создании правил должны использоваться сервисы UDP;
- `icmp_service_include` = [`true` / `false`] - признак того, что при создании правил должны использоваться сервисы ICMP (только для правил фильтрации);
- `nat_service_type` = [`none`, `tcp`, `udp`] - варианты использования сервисов в транслированных пакетах;
- `rules_start_index` = N - начальный индекс правила (используется при расчете количества создаваемых правил);
- `rules_end_index` = M - конечный индекс правила M < N (используется при расчете количества создаваемых правил);
- `host_set_num` = K - количество наборов хостов в одной ячейке правила.
