# Используемые обозначения

ЦУС - Центр управления сетью.

УБ - Узел безопасности.

СД - Сервер доступа.

МК - Менеджер конфигурации.

АРМ - Автоматизированное рабочее место.

# Доступные инструменты

**Важно!** Последние изменения представлены в файле `patch_notes`.

| Инструмент              | Назначение                                                                                                  | API | Комментарий                                                                |
|-------------------------|-------------------------------------------------------------------------------------------------------------|-----|----------------------------------------------------------------------------|
| `aserv_c4_importer`     | Инструмент для переноса (миграции) данных с СД Континент 3 на СД Континент 4                                | Да  | Только совместно с `c4_lib`, Континент 3.9.4 &rarr; Континент 4.1.9 и выше |
| `c4_backup_tool`        | Инструмент для создания и выгрузки резервной копии БД ЦУС                                                   | Да  | Только совместно с `c4_lib`                                                |
| `c4_config_exporter`    | Инструмент для экспорта конфигурации УБ для сторонних compliance-систем                                     | Да  | Только совместно с `c4_lib`                                                |
| `c4_config_transfer`    | Инструмент для переноса в ограниченном объеме политики между разными ЦУС                                    | Да  | Только совместно с `c4_lib`                                                |
| `c4_ioc_omporter_k`     | Инструмент для импорта объектов IoC (Indicator of Compromise) от вендора Kaspersky                          | Да  | Только совместно с `c4_lib`, Континент 4.1.9 и выше                        |
| `c4_ioc_importer_rv`    | Инструмент для импорта объектов IoC (Indicator of Compromise) от вендора R-Vision                           | Да  | Только совместно с `c4_lib`, Континент 4.1.9 и выше                        |
| `c4_ioc_importer_sv`    | Инструмент для импорта объектов IoC (Indicator of Compromise) от вендора Security Vision                    | Да  | Только совместно с `c4_lib`, Континент 4.1.9 и выше                        |
| `c4_lib`                | Библиотека для работы с API Континент 4                                                                     | Да  | Нет                                                                        |
| `c4_policy_install`     | Инструмент для подачи ЦУС команды на установку политики                                                     | Да  | Только совместно с `c4_lib`                                                |
| `c4_rules_maker`        | Инструмент для генерации правил по заданным директивам                                                      | Да  | Только совместно с `c4_lib`                                                |
| `c4_vlan_maker`         | Инструмент для генерации логических интерфейсов VLAN по заданному списку                                    | Да  | Только совместно с `c4_lib`                                                |
| `c4_xls_rules_maker`    | Инструмент для создания правил фильтрации (FW) и трансляции (NAT) по заданному шаблону                      | Да  | Только совместно с `c4_lib`, в том числе для миграции с Palo Alto Networks |
| `convert_с3_to_c4`      | Инструмент для конвертации конфигурации из `*.xml` Континент 3 и последующего импорта в Континент 4         | Нет | Континент 3.9.3 &rarr; Континент 4.1.7 и выше                              |
| `convert_cisco_to_c4`   | Инструмент для конвертации активной (running) конфигурации Cisco ASA и последующего импорта в Континент 4   | Нет | Cisco ASA 8.3 / 8.4 / 9.1 &rarr; Континент 4.1.7 и выше                    |
| `convert_cp_json_to_c4` | Инструмент для конвертации конфигурации из `*.json` Check Point и последующего импорта в Континент 4        | Нет | Check Point R81.10 &rarr; Континент 4.1.7 и выше                           |
| `convert_cp_to_c4`      | Инструмент для конвертации конфигурации из `*.fws` и `*.c` Check Point и последующего импорта в Континент 4 | Нет | Check Point R77.30 / R80.20 &rarr; Континент 4.1.7 и выше                  |
| `convert_forti_to_c4`   | Инструмент для конвертации конфигурации из `*.conf` FortiGate и последующего импорта в Континент 4          | Нет | FortiGate 5.0.4 / 7.2.0 &rarr; Континент 4.1.7 и выше                      |
| `convert_ug_to_c4`      | Инструмент для конвертации конфигурации UserGate и последующего импорта в Континент 4                       | Нет | UserGate 6.1 / 7.0 / 7.1 &rarr; Континент 4.1.7 и выше                     |

> В комментариях указана версия системы-источника, на которой проверялась работа.
> Для других версий результаты работы инструментов и выполнения функции импорта данных в Континент 4 могут отличаться.

# Основные характеристики

1. Все инструменты представлены набором скриптов на языке Python.
2. Все инструменты предоставляют пользователю интерфейс CLI.
3. Все инструменты содержат встроенную справку по их использованию (ключи, параметры).
4. Инструменты для конвертации конфигурации поставляются в виде исходных файлов `<tool>.py`.
5. Инструменты для работы с API поставляются в пакетов `<tool>.tar.gz` и `<tool>.whl`.
6. Инструменты для работы с API доустанавливают компоненты, необходимые для выполнения своих функций.
7. Инструменты для работы с API используют библиотеку `c4_lib`.
8. Инструменты для работы с API рекомендуется устанавливать и запускать в виртуальном окружении.

# Системные требования

1. Всем инструментам необходим интерпретатор Python последней версии, установленный на АРМ пользователя.
2. Инструментам для работы с API необходим компонент `openssl` версии 3.0 или выше, установленный на АРМ пользователя.
3. Инструментам для работы с API необходим физический и логический доступ АРМ пользователя к ЦУС.
4. Инструментам для работы с API необходимо наличие IP адреса АРМ пользователя в списке разрешенных для подключения к ЦУС (см. свойства УБ с ЦУС в МК).
5. Инструментам для работы с API необходимо указание учетной записи администратора Континент 4 с ролью **Главный администратор**.
6. Инструментам для работы с API необходима предварительная установка библиотеки `c4_lib`.
7. Инструментам для работы с API необходимо АРМ под управлением ОС Linux.

# Инструкция по установке и использованию инструментов для конвертации конфигурации

1. На любой АРМ с установленным интерпретатором Python скачать файл скрипта `<tool>.py`.
2. Выполнить команду `python <tool>.py` или `python3 <tool>.py` в зависимости от ОС на АРМ (Windows / Linux).
3. Ознакомиться с выведенной на экран встроенной справкой по использованию инструмента. Инструмент готов!
4. Штатным образом выполнить подключение к шлюзу другого вендора и извлечь файл(ы) конфигурации в соответствующем формате.
5. Использовать извлеченный файл(ы) конфигурации в качестве входных данных, а также задать параметры параметры выходных данных и пр.
6. Дождаться завершения процедуры конвертации и ознакомиться с выведенными на экран результатами, содержимым созданного инструментом файла лога.
7. Получить в результате использования инструмента файл(ы) конфигурации в универсальном формате `*.json`.
8. Запустить МК и выполнить подключение к ЦУС.
9. Перейти в раздел **Контроль доступа** | **Межсетевой экран**.
10. В контекстном меню списка правил выбрать пункт **Импортировать**.
11. Выбрать файл конфигурации в универсальном формате `*.json`, полученный в результате использования инструмента.
12. Дождаться завершения импорта данных и ознакомиться с результатами в разделе **Администрирование** | **Задачи**.
13. Перейти в раздел **Контроль доступа** | **Трансляция сетевых адресов**.
14. В контекстном меню списка правил выбрать пункт **Импортировать**.
15. Выбрать файл конфигурации в универсальном формате `*.json`, полученный в результате использования инструмента.
16. Дождаться завершения импорта данных и ознакомиться с результатами в разделе **Администрирование** | **Задачи**.
17. Импорт завершен.

> Инструменты конвертации представлены исходными скриптами, поэтому их установка в систему не производится.
> Если путь до файла лога не указан в параметрах явно, то файл будет создан в той же директории, в которой размещен файл скрипта `<tool>.py`.
> Запуск инструмента может выполняться на любом подходящем АРМ, включая АРМ, на котором установлен МК.

# Инструкция по установке и использованию инструментов для работы с API

> Использование ключа `--force-reinstall` может привести к проблемам в работе виртуального окружения.
> Подробная информация по виртуальному окружению доступна по [ссылке](https://docs.python.org/3/library/venv.html)

## Online

1. На АРМ с доступом в сеть Инетрнет скачать один из пакетов `<tool>.tar.gz` или `<tool>.whl`.
2. Создать виртуальное окружение с помощью команды `python -m venv --system-site-packages <path_to_dir>`.
3. Активировать созданное виртуальное окружение с помощью команды `source <path_to_dir>/bin/activate`.
4. Выполнить установку инструмента с помощью команды `pip install <tool>.tar.gz` или `pip install <tool>.whl`.
5. Дождаться завершения загрузки из репозиториев Python и установки компонентов, необходимых для работы инструмента.
6. Вызвать встроенную справку по использованию установленного инструмента с помощью команды `<tool>` и ознакомиться с ее содержанием. Инструмент готов!
7. После использования инструмента виртуальное окружение можно деактивировать с помощью команды `deactivate`.

## Offline

1. На АРМ с доступом в сеть Интернет скачать пакет `<tool>.tar.gz` или `<tool>.whl`.
2. Скачать список зависимостей с помощью команды `pip download <tool>.whl --find-links . -d "./test"`.
3. Перенести скаченный пакет и директорию с сохраненным списком зависимостей `test` на АРМ без доступа в сеть Интернет.
4. Так как библиотека `c4_lib` отсутствует в репозиториях Python, необходимо с помощью ключа `--find-links` указать путь до директории с ее установочным файлом (например, тоже `test`).
5. Создать виртуальное окружение с помощью команды `python -m venv --system-site-packages <path_to_dir>`.
6. Активировать созданное виртуальное окружение с помощью команды `source <path_to_dir>/bin/activate`.
7. Выполнить установку инструмента с помощью команды `pip install <tool>.tar.gz --find-links ./test` или `pip install <tool>.whl --find-links ./test`.
8. Дождаться завершения установки компонентов, необходимых для работы инструмента.
9. Вызвать встроенную справку по использованию установленного инструмента с помощью команды `<tool>` и ознакомиться с ее содержанием. Инструмент готов!
10. После использования инструмента виртуальное окружение можно деактивировать с помощью команды `deactivate`.

# Приложения

Список поддерживаемых в Континент 4 типов / кодов ICMP сообщений представлен в табилце ниже.

С полным перечнем типов / кодов ICMP сообщений, включая их описание, можно ознакомиться по [ссылке](https://www.iana.org/assignments/icmp-parameters/icmp-parameters.xhtml).

| Номер типа | Номер кода |
|------------|------------|
| -          | -          |
| 0          | 0          |
| 3          | 0          |
| 3          | 1          |
| 3          | 2          |
| 3          | 3          |
| 3          | 4          |
| 3          | 5          |
| 3          | 6          |
| 3          | 7          |
| 3          | 8          |
| 3          | 9          |
| 3          | 10         |
| 3          | 11         |
| 3          | 12         |
| 3          | 13         |
| 3          | 14         |
| 3          | 15         |
| 4          | 0          |
| 5          | 0          |
| 5          | 1          |
| 5          | 2          |
| 5          | 3          |
| 6          | 0          |
| 8          | 0          |
| 9          | 0          |
| 9          | 16         |
| 10         | 0          |
| 11         | 0          |
| 11         | 1          |
| 12         | 0          |
| 12         | 1          |
| 12         | 2          |
| 13         | 0          |
| 14         | 0          |
| 15         | 0          |
| 16         | 0          |
| 17         | 0          |
| 18         | 0          |
| 30         | -          |
| 31         | -          |
| 32         | -          |
| 33         | -          |
| 34         | -          |
| 35         | -          |
| 36         | -          |
| 37         | -          |
| 38         | -          |
| 39         | -          |
| 40         | 0          |
| 40         | 1          |
| 40         | 2          |
| 40         | 3          |
| 40         | 4          |
| 40         | 5          |
| 41         | -          |
| 42         | 0          |
| 43         | 0          |
| 43         | 1          |
| 43         | 2          |
| 43         | 3          |
| 43         | 4          |
