# Назначение инструмента

Конвертация конфигурации FortiGate из формата `*.conf` в универсальный формат `*.json` для последующего импорта в Континент 4 (далее - К4) в объеме

  - правила фильтрации сетевого трафика;
  - правила трансляции сетевых адресов;
  - сетевые объекты, используемые в правилах;
  - сервисы, используемые в правилах;
  - временные интервалы, используемые в правилах.

# Замечания для правил фильтрации

1. Все импортированные правила на стороне К4 будут отключены.
2. Если в качестве `srcaddr` на стороне FortiGate не указано ни одного сетевого объекта, на стороне К4 для "Отправителя" будет установлено значение "Любой" / "Any".
3. Если в качестве `dstaddr` на стороне FortiGate не указано ни одного сетевого объекта, на стороне К4 для "Получателя" будет установлено значение "Любой" / "Any".
4. Если в качестве `service` на стороне FortiGate не указано ни одного объекта, на стороне К4 для "Сервиса" будет установлено значение "Любой" / "Any".
5. Если в качестве `schedule` на стороне FortiGate не указано ни одного объекта, на стороне К4 для "Временного интервала" будет установлено значение "Всегда" / "Always".
6. При импорте правил из FortiGate в К4 параметр "Действие" / "Action" переносится согласно следующим правилам:

    - если в качестве `action` на стороне FortiGate указано значение `accept`, на стороне К4 для "Действия" будет установлено значение "Пропустить" / "Accept";
    - в остальных случаях на стороне К4 для "Действия" будет установлено значение "Отбросить" / "Block".

7. В К4 не переносятся параметры: `srcintf`, `dstintf`, `ssl-ssh-profile`, `utm-status`, `av-profile`, `webfilter-profile`, `dnsfilter-profile`, `file-filter-profile`, `ips-sensor`, `application-list`, `wccp`, `captive-portal-exempt`, `inspection-mode`.
8. При импорте правил из FortiGate в К4 будут добавлены следующие необходимые для корректной работы системы параметры (для этих параметров на стороне К4 будут установлены значения по умолчанию):

    - Профиль Web/FTP фильтрации;
    - Приложение;
    - СОВ.

9. При импорте правил из FortiGate в К4 не осуществляется перенос сетевых объектов, тип которых отличается от `iprange`, `subnet`, `vip`, `vipgrp`, `interface-subnet`.
10. При импорте правил из FortiGate в К4 не осуществляется перенос временных объектов из раздела `firewall schedule group`.
11. При импорте правил из FortiGate в К4 не осуществляется перенос сервисов с протоколами `0` / `41` / `43` / `44` / `45` / `46` / `50` / `51` / `58` / `59` / `60`.
12. При импорте правил из FortiGate в К4 не осуществляется перенос сервисов, протокол которых отличается от `icmp`, `ip`, `tcp`, `udp`.
13. Для сетевых объектов типа `interface-subnet` при импорте правил из FortiGate в К4 не осуществляется перенос параметра `interface`.
14. Для сетевых объектов типа `subnet` при импорте правил из FortiGate в К4 не осуществляется перенос параметров: `allow-routing`, `associated-interface`.
15. Для сервисов типа `icmp` при импорте правил из FortiGate в К4 не осуществляется перенос параметра `visibility`.
16. Не осуществляется перенос сервисов типа `icmp`, если их тип и код не входят в перечень поддерживаемых.

## Замечания для правил фильтрации

1. Все импортированные правила на стороне К4 будут отключены.
2. Если в качестве `srcaddr` на стороне FortiGate не указано ни одного сетевого объекта, на стороне К4 для "Отправителя" будет установлено значение "Любой" / "Any".
3. Если в качестве `dstaddr` на стороне FortiGate не указан `vip` объект, на стороне К4 для "Получателя", "Сервиса" и аналогичных значений транслированного пакета будет установлено значение "Любой" / "Any".
4. Если в качестве `dstaddr` на стороне FortiGate не указано ни одного сетевого объекта, на стороне К4 для "Получателя" будет установлено значение "Любой" / "Any".
5. Если в оригинальном правиле на стороне FortiGate установлено значение `disable` для поля `nat` и не используются объекты `vip`, то такое правило трансляции не переносится.
6. Не осуществляется перенос правил, для которых на стороне FortiGate поля сервиса или транслированного сервиса содержат протокол, который отличается от `6` (TCP) или `17` (UDP).
7. При импорте правил из FortiGate в К4 не осуществляется перенос сетевых объектов, тип которых отличается от `iprange`, `subnet`, `vip`, `vipgrp`, `interface-subnet`.
8. Для сетевых объектов типа `interface-subnet` при импорте правил из FortiGate в К4 не осуществляется перенос параметра `interface`.
9. Для сетевых объектов типа `subnet` при импорте правил из FortiGate в К4 не осуществляется перенос параметров: `allow-routing`, `associated-interface`.
10. При импорте правил из FortiGate в К4 тип трансляции переносится согласно следующим правилам:

    - если на стороне FortiGate используется `vip` объект в поле `dstaddr`, то будет установлено значение "Получателя" / "Destination";
    - если на стороне FortiGate используется `ippool` объект и поле `type` имеет значение 'one-to-one', то будет установлено значение "Отобразить" / "One-to-one";
    - если на стороне FortiGate используется `ippool` объект и в поле `type` не установлено значение, то будет установлено значение "Отправителя" / "Source";
    - в остальных случаях будет установлено значение "Скрыть" / "Hide".

# Приложения

К инструменту прилагаются следующие материалы:

- `c4_unified_json.svg` - описание структуры (схема) импортируемых данных.
