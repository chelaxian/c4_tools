# Подготовка к работе

1. Штатным образом выполните подключение к Cisco ASA и извлеките файл конфигурации (running) в формате `*.txt`.
2. Скачайте и установите последнюю версию интерпретатора Python.
3. Выполните распаковку скрипта `convert_cisco_to_c4.py`, разместив содержимое в любой каталог на рабочем месте (РМ) администратора.

>**Внимание:** Запуск скрипта `convert_cisco_to_c4.py` может выполняться как на рабочем месте администратора с установленным менеджером конфигурации (МК), так и на стороннем рабочем месте. Если скрипт `convert_cisco_to_c4.py` и МК находятся на разных РМ подразумевается, то сгенерированные файлы для импорта в МК необходимо будет перенести на РМ с установленным МК.

# Алгоритм работы

1. Запустите командную строку.
2. В командной строке перейдите в каталог, где распакован скрипт `convert_cisco_to_c4.py`.
3. Запустите скрипт с помощью команды `python convert_cisco_to_c4.py`.
4. На экран будет выведено руководство по использованию скрипта. Ознакомьтесь с руководством!
5. Следуя инструкции, укажите путь до файла c конфигурацией `*.txt` (INPUT).
6. Следуя инструкции, укажите путь до папки для сохранения преобразованного файла (OUTPUT_PATH).
7. При необходимости Вы можете сохранить копию лога работы со скриптом преобразования правил (LOG_FILE).
8. При необходимости Вы можете скорректировать стандартное имя для преобразованного файла (NAME).
9. После ввода параметров согласно пунктам 5 - 11 подтвердите запуск процедуры преобразования с помощью клавиши клавиатуры "Enter".
10. Убедитесь, что по окончанию работы скрипта сгенерирован отчет о преобразовании объектов разных типов, включая правила, в командной строке.
11. Убедитесь, что по окончанию работы скрипта в папке для сохранения преобразованного файла лежит два файла:
    - файл, содержащий конфигурацию в универсальном формате *.json; 
    - отчет о результате операции импорта.

>**Примечание:** Если путь в параметрах не указан, файл с копией лога будет сохранен в директории, в которой скрипт был запущен. 

# Алгоритм импорта правил из различных систем в КБ "Континент. Версия 4" (далее – К4) через МК

1. Запустите МК.
2. Выполните подключение к ЦУС.
3. Перейдите в раздел "Контроль доступа – Межсетевой экран".
4. В пустой области секции "Межсетевой экран" используйте пункт "Импортировать" контекстного меню.
5. Будет выведено диалоговое окно для выбора файла конфигурации из внешней системы.
6. Выберите файл конфигурации в универсальном формате `*.json`, сгенерированный ранее скриптом `convert_cisco_to_c4.py`.
7. Нажмите кнопку "Открыть".
8. Дождитесь окончания импорта.
9. После завершения операции импорта будет выведено информационное сообщение о результате выполнения импорта.
10. Ознакомьтесь с результатами выполнения импорта.
11. Перейдите в раздел "Контроль доступа – Трансляция сетевых адресов".
12. В пустой области секции "Трансляция сетевых адресов" используйте пункт "Импортировать" контекстного меню.
13. Будет выведено диалоговое окно для выбора файла конфигурации из внешней системы.
14. Выберите файл конфигурации в универсальном формате `*.json`, сгенерированный ранее скриптом `convert_cisco_to_c4.py`.
15. Нажмите кнопку "Открыть".
16. Дождитесь окончания импорта.
17. После завершения операции импорта будет выведено информационное сообщение о результате выполнения импорта.
18. Ознакомьтесь с результатами выполнения импорта.

## Просмотр детальной информации о результатах импорта

1. Перейдите в раздел "Администрирование – Задачи".
2. Выберите в списке задачу "Импорт политики контроля доступа", соответствующую времени запуска и окончания импорта.
3. В окне "Информация" будет представлен отчет, содержащем сообщения о результатах операции импорта. Если окно не отображается, перейдите на вкладку "Вид" и активируйте кнопку "Информация". 

## Замечания для правил фильтрации

...

## Замечания для правил фильтрации

...

## Список поддерживаемых типов/кодов сообщений ICMP

С полным перечнем типов/кодов, включая их описание, можно ознакомиться по [ссылке](https://www.iana.org/assignments/icmp-parameters/icmp-parameters.xhtml)

| Номер типа | Номер кода |
|------------|------------|
| -          | -          |
| 0          | 0          |
| 3          | 0          |
| 3          | 1          |
| 3          | 2          |
| 3          | 3          |
| 3          | 4          |
| 3          | 5          |
| 3          | 6          |
| 3          | 7          |
| 3          | 8          |
| 3          | 9          |
| 3          | 10         |
| 3          | 11         |
| 3          | 12         |
| 3          | 13         |
| 3          | 14         |
| 3          | 15         |
| 4          | 0          |
| 5          | 0          |
| 5          | 1          |
| 5          | 2          |
| 5          | 3          |
| 6          | 0          |
| 8          | 0          |
| 9          | 0          |
| 9          | 16         |
| 10         | 0          |
| 11         | 0          |
| 11         | 1          |
| 12         | 0          |
| 12         | 1          |
| 12         | 2          |
| 13         | 0          |
| 14         | 0          |
| 15         | 0          |
| 16         | 0          |
| 17         | 0          |
| 18         | 0          |
| 30         | -          |
| 31         | -          |
| 32         | -          |
| 33         | -          |
| 34         | -          |
| 35         | -          |
| 36         | -          |
| 37         | -          |
| 38         | -          |
| 39         | -          |
| 40         | 0          |
| 40         | 1          |
| 40         | 2          |
| 40         | 3          |
| 40         | 4          |
| 40         | 5          |
| 41         | -          |
| 42         | 0          |
| 43         | 0          |
| 43         | 1          |
| 43         | 2          |
| 43         | 3          |
| 43         | 4          |

# Приложения

К инструменту прилагаются следующие материалы:

- `c4_unified_json.svg` - описание структуры (схема) импортируемых данных.
